---
layout: post
title: Szybkie wyszukiwanie dzierżawy w DHCP.
date: '2008-11-08T23:02:00.000+01:00'
author: kaarol
tags:
- Ogólne
- Windows XP
- Vista
- Windows Server 2kX
- Jezyki programowania
modified_time: '2015-02-23T23:51:44.292+01:00'
blogger_id: tag:blogger.com,1999:blog-1272990746006552071.post-2179543063443433068
blogger_orig_url: http://www.it-flow.pl/2008/11/szybkie-wyszukiwanie-dzierzawy-w-dhcp.html
---

Czasami dostaję informacje o problemach z niektórymi komputeram. Użytkownicy nie mają dostępu do zasobów sieciowych czy nie mają wyjścia na świat. Jest to spowodowane różnymi problemami, czasem sieć przed nimi broni NAP, czasem ktos wyciągnął wtyczkę a czasem komputer nie otrzymał IP z serwera DHCP.<br/><br/>Jeśli komputer nie otrzymuje dzierżawy to zaczyna się zabawa z wyszukiwaniem czy dany adres MAC został wpisany do rezerwacji. Zwykły snapin DHCP jak na razie nie pozwala nam jakoś sensownie wyszukiwać rezerwacji za pomocą adresów fizycznych. O ile dziesięć, pięćdziesiąt adresów można szybko przepatrzeć to sto, dwieście czy tysiąc rezerwacji nie ogląda się zbyt dobrze:(<br/><br/>Na szczęście da się temu wszystkiemu zaradzić za pomocą różnych skryptów. Najprościej jest wykorzystać netsh i findstr. Minusem tej metody jest wyplucie z netsh do pamięci wszystkich rezerwacji z serwera DHCP.<br/><br/>Przykład:<br/><pre lang="Winbatch">netsh dhcp server \\"nazwa_serwera" scope "nazwa_przedzialu" show reservedip | findstr "adres_fizyczny"</pre><br/><pre>Adres fizyczny musi byc postaci 00-0f-0d-01-01-02</pre><br/>Gdzieś jeszcze mam lepszy odpowiednik w C# jak go znajdę w pracy to wstawie do plików.