---

title: SCCM – Gdzie moje polisy.
date: '2009-05-29T01:26:00.000+02:00'
author: kaarol
tags:
- Oprogramowanie Serwerowe
- Komercja
- Oprogramowanie klienckie
modified_time: '2015-03-03T21:24:36.046+01:00'
thumbnail: http://1.bp.blogspot.com/-TRZM-ctJyxo/VPYU-oGiA9I/AAAAAAAAAFM/RfTi07Iyguc/s72-c/dccm.png
blogger_id: tag:blogger.com,1999:blog-1272990746006552071.post-3350002864667407603
blogger_orig_url: http://www.it-flow.pl/2009/05/sccm-gdzie-moje-polisy.html
---

Od około dwóch tygodni testuję SCCM 2007 R2. W skrócie sprawdzam czy uda mi się go dopasować do mojego aktualnego środowiska. Podczas testów napotykam na coraz to bardziej ciekawe problemy, wynikające z mojej ciekawości:) <br />Ostatnio przez kilka dni co parę godzin w logu aplikacji na klientach przewijał się błąd następującej treści:<br /><div align="center"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-TRZM-ctJyxo/VPYU-oGiA9I/AAAAAAAAAFM/RfTi07Iyguc/s1600/dccm.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-TRZM-ctJyxo/VPYU-oGiA9I/AAAAAAAAAFM/RfTi07Iyguc/s1600/dccm.png" height="320" width="301" /></a></div><div align="left">W sumie błąd dość czytelny :) BITS próbuje coś ściągnąć ale mu się nie udaje :( Szkoda tylko, że nigdzie w tym wpisie nie ma hint’u czego nie można ściągnąć:( Jednak jak to zwykle bywa każdy klient, program z MS poza standardowymi (czasem mało mówiącymi) logami ma jeden lub kilka logów tekstowych, w których jest więcej informacji. W przypadku klienta SCCM logi te umieszczone są w <em>%SYSTEMROOT%\System32\CCM\Logs</em>. </div><div align="left">Po pięciu minutach grzebania po logach znalazłem trochę więcej informacji w <em>Policy-AgentLog</em>:</div><pre lang="C#">instance of CCM_PolicyAgent_PolicyDownloadFailed<br />{<br />ClientID = "GUID:A8C15B18-491B-4D52-BEED-D2FF81B3CB04";<br />DateTime = "20090521083429.926000+000";<br />DownloadErrorInfo =<br />instance of CCM_BitsDownloadMethod_ErrorInfo<br />{<br />ErrorCode = 2147942402;<br />ErrorMessage = "BITS error: 'Unknown' Context: 'Unknown'";<br />};<br />DownloadMethod = "BITS";<br />DownloadSource = "http://SCCM-SERVER01.SCCM.LOCAL/SMS_MP/.sms_pol?DYD20001-DYD00005-44638712.7216_00";<br />PolicyNamespace = "\\\\SCCM-CLIENT2\\ROOT\\ccm\\policy\\Machine\\RequestedConfig";<br />PolicyPath = "CCM_Policy_Policy4.PolicyID=\"DYD20001-DYD00005-44638712\",<br />PolicySource=\"SMS:DYD\",PolicyVersion=\"7216.00\"";<br />ProcessID = 2020;<br />ThreadID = 2708;<br />}; </pre><br /><br /><br /><br /><br />Na samym początku nie mogłem zrozumieć dlaczego klient nie może pobrać tej polisy. Drugiego dnia wszystko stało się jasne:<br /><br /><br /><div align="center"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-IISlXybxGk4/VPYVCVM9jQI/AAAAAAAAAE4/nhqzjAcSpS4/s1600/sccm2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-IISlXybxGk4/VPYVCVM9jQI/AAAAAAAAAE4/nhqzjAcSpS4/s1600/sccm2.png" height="136" width="640" /></a></div><br /><br /><div align="left">Jak się okazało (patrz powyższy zrzut). Polisa, której klient nie mógł pobrać z serwera miała identyfikator DYD00005 (2), który jednoznacznie wskazywał na paczkę z FF.&nbsp; Co ciekawe wersja paczki była kosmiczna =14761 (1). Przecież aż tak często&nbsp; nie mogłem zmieniać paczki Firefoxa.&nbsp;&nbsp; Okazało się, że podczas tworzenia pierwszej paczki, tak był to FireFox, ustawiłem by punkt dystrybucyjny był uaktualniany co 1 minutę:</div><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-u28TQy9Ypco/VPYVCmVOYTI/AAAAAAAAAE0/CJ_I7f_shsk/s1600/sccm3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-u28TQy9Ypco/VPYVCmVOYTI/AAAAAAAAAE0/CJ_I7f_shsk/s1600/sccm3.png" height="87" width="400" /></a></div><div align="center"><br /></div><br /><br />Czyli mówiąc jaśniej. Serwer co minutę uaktualniał paczkę Firefoxa. Co pięć minut klient pobierał informacje o zmianach i nowych polisach. Paczka cały czas była rozgłaszana bo nie dałem ograniczenia czasowego. W wyniku czego klient pobrał sobie polisę, zainstalował Firefoxa i po 5 minutach już miał kolejną polisę dotyczącą zmian. Po otrzymaniu informacji, że są nowe polisy zaczynała się operacja pobierania. Nie wszystko w SCCM trwa szybko. W wyniku czego od czasu do czasu (+- 1-3h) klient próbował pobierać polisę, która chwilę wcześniej została usunięta i zastąpiona nową. Klient SCCM pozostawał w martwym punkcie więc generował wpis do dziennika zdarzeń. <br /><br /><br />Problem jest trywialny jednak dla osoby, która dopiero zaczyna z SCCM jest to ‘niezła zabawa’:)&nbsp; <br /><br /><br />P.S. <br /><br /><br />Problem ten dał mi do myślenia i teraz każdą dystrybucję pakietu staram się zaplanować i nie włączać nadmiarowych opcji. 